<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SweetCharm</title>
    <!--Boostrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>

    <!--Fuentes-->
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Quicksand:wght@400;600&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300..700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <!--Estilo css-->
    <link rel="stylesheet" href="css/style.css">

</head>

<body>
    <header>
        <nav>
            <a href="#">Inicio</a>
            <a href="index.html">Menu</a>
            <a href="#">Contactanos</a>
            <a href="administrar.html">Administrador</a>
        </nav>
        <h1 class=" mt-5">SweetCharm</h1>
        <img src="img/gatito.png" alt="gatito en taza logo de SweetCharm" class="logo ">
        <!-- DECORACIONES -->

        <img src="img/figuraCafe.png" class="decor top-left" alt="decor cafe" />
        <img src="img/figuraGatito.png" class="decor top-right" alt="decor pastel" />
        <img src="img/figuraMochi.png" class="decor bottom-left" alt="decor cat1" />
        <img src="img/figuraPastel.png" class="decor bottom-right" alt="decor cat2" />




    </header>

        <!-- Loader -->
    <div id="loader" role="status">
        <strong style="font-size: 30px;">Cargando datos...</strong>
    </div>

    <div class="container-cards mb-3 h-max" id="contenido">
        <h2 class="titulo-menu">Productos</h2>
        <div class="table-responsive mt-4">
            <table class="table table-bordered text-center align-middle" id="tablaProductos">
                <thead class="table-light">
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Descripción</th>
                        <th>Precio</th>
                        <th>Categoría</th>
                        <th>Producto</th>
                        <th>Opciones</th>
                    </tr>
                </thead>
                <tbody class="tabla-cuerpo">
            </table>
        </div>



    </div>


    <!-- Modal -->
    <div class="modal fade" id="modalProducto" tabindex="-1" aria-labelledby="modalProductoLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content rounded-4 shadow">
                <div class="modal-header">
                    <h5 class="modal-title fw-bold" id="modalProductoLabel">Nuevo Producto</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>

                <div class="modal-body">
                    <form id="productoForm">
                        <div class="mb-3">
                            <label for="nombre" class="form-label fw-semibold">Nombre del producto</label>
                            <input type="text" class="form-control" id="nombre" placeholder="Ej. Pastel de fresas"
                                required pattern="^[A-Za-zÁÉÍÓÚáéíóúÑñ ]+$">
                            <div class="invalid-feedback">
                                El nombre solo puede contener letras y espacios.
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="descripcion" class="form-label fw-semibold">Descripción</label>
                            <textarea class="form-control" id="descripcion" rows="3"
                                placeholder="Describe tu producto..." required></textarea>
                        </div>

                        <div class="mb-3">
                            <label for="precio" class="form-label fw-semibold">Precio</label>
                            <input type="number" class="form-control" id="precio" placeholder="0.00" step="0.01"
                                required min="0.01" max="9999.99" pattern="^\d+(\.\d{1,2})?$">
                            <div class="invalid-feedback">
                                Ingresa un precio válido (hasta dos decimales, entre 0.01 y 9999.99).
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="categoria" class="form-label fw-semibold">Categoría</label>
                            <select class="form-select" id="categoria" required>
                                <option value="">Selecciona una categoría</option>
                                <option value="postre">Postre</option>
                                <option value="bebida">Bebida</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="imagenInput" class="form-label fw-semibold">Imagen del producto</label>
                            <input type="file" class="form-control" id="imagenInput" accept="image/*" required>
                        </div>

                        <div class="text-end">
                            <button type="submit" class="btn  rounded-pill px-4 " id="btn-insertar">Guardar
                                producto</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Editar-->
    <div class="modal fade" id="modalEditar" tabindex="-1" aria-labelledby="modalEditarLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content" style="background-color: #ffffff;">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalEditarLabel">Editar producto</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                    <form id="formEditarProducto">
                        <input type="hidden" id="idEditar">

                        <div class="mb-3">
                            <label for="nombreEditar" class="form-label">Nombre</label>
                            <input type="text" class="form-control" id="nombreEditar" required
                                pattern="^[A-Za-zÁÉÍÓÚáéíóúÑñ ]+$"  >
                        </div>

                        <div class="mb-3">
                            <label for="descripcionEditar" class="form-label">Descripción</label>
                            <textarea class="form-control" id="descripcionEditar" rows="3" required></textarea>
                        </div>

                        <div class="mb-3">
                            <label for="precioEditar" class="form-label">Precio</label>
                            <input type="number" class="form-control" id="precioEditar"  step="0.01"
                                required min="0.01" max="9999.99" pattern="^\d+(\.\d{1,2})?$">
                        </div>

                        <div class="mb-3">
                            <label for="categoriaEditar" class="form-label">Categoría</label>
                            <select class="form-select" id="categoriaEditar" required>
                                <option value="1">Postre</option>
                                <option value="2">Bebida</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="imagenActual" class="form-label">Imagen actual</label><br>
                            <img id="imagenVista" src="" alt="Imagen actual"
                                style="max-width: 150px; border-radius: 10px;">
                        </div>

                        <div class="mb-3">
                            <label for="nuevaImagen" class="form-label">Nueva imagen (opcional)</label>
                            <input class="form-control" type="file" id="nuevaImagen" accept="image/*">
                        </div>

                        <div class="text-end">
                            <button type="submit" class="btn rounded-pill" id="btn-actualizar">Actualizar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>





    <!--Boton flotante para agregar registros-->
    <button class="add-button" id="btn-AbrirModal" title="Agregar Integrante">
        <img src="img/mas.png" alt="" style="width: 60px; height: 50px;">
    </button>







    <footer>
        &copy; 2025 SweetCharm Gabriela Mena y Diego Zelaya
    </footer>
    <!-- Supabase CDN: debe ir antes de tu JS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>

    <script src="js/administrar.js"></script>
</body>

</html>